!function(t,e){"use strict";function r(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}})),e.default=t,Object.freeze(e)}var n=r(e);function o(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function i(){i=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p="suspendedStart",d="suspendedYield",v="executing",g="completed",y={};function m(){}function w(){}function b(){}var x={};l(x,c,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(I([])));_&&_!==r&&n.call(_,c)&&(x=_);var j=b.prototype=m.prototype=Object.create(x);function L(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function k(e,r,n){var o=p;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=O(c,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?g:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=g,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return w.prototype=b,o(j,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},L($.prototype),l($.prototype,s,(function(){return this})),e.AsyncIterator=$,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new $(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(j),l(j,u,"Generator"),l(j,c,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}var a,c,s,u=(a=function(t,e){var r;r=function(){function t(){for(var t=0,e={};t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function i(e,r,i){if("undefined"!=typeof document){"number"==typeof(i=t({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(t){}r=n.write?n.write(r,e):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in i)i[s]&&(c+="; "+s,!0!==i[s]&&(c+="="+i[s].split(";")[0]));return document.cookie=e+"="+r+c}}function a(t,r){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),s=c.slice(1).join("=");r||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var u=e(c[0]);if(s=(n.read||n)(s,u)||e(s),r)try{s=JSON.parse(s)}catch(t){}if(o[u]=s,t===u)break}catch(t){}}return t?o[t]:o}}return o.set=i,o.get=function(t){return a(t,!1)},o.getJSON=function(t){return a(t,!0)},o.remove=function(e,r){i(e,"",t(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}((function(){}))},t.exports=r()},a(s={path:c,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&s.path)}},s.exports),s.exports);if(t.DEV){function f(e){if(!(e in globalThis)){let r;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(void 0!==r)return r;!function(e){if(t.DEV){const t=new Error(`rune_outside_svelte\nThe \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files\nhttps://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/rune_outside_svelte")}(e)},set:t=>{r=t}})}}f("$state"),f("$effect"),f("$derived"),f("$inspect"),f("$props"),f("$bindable")}function l(t){console.log("I should be working now"),function(t){console.log("âœ… FullscreenGallery.svelte is loading!"),t.out+='<div class="gallery-container svelte-1w4ipqg"><button>&lt;</button> <img'.concat(n.attr("src","/path-to-your-image1.jpg"),' class="gallery-image svelte-1w4ipqg"> <button>></button> '),t.out+="\x3c!--[!--\x3e",t.out+="\x3c!--]--\x3e</div>"}(t)}$(document).ready((function(){$("#block-yui_3_17_2_1_1587646755522_24810 .slide").append('<button class="vote-button" id="vote button">    &uarr; SELECT     &uarr;</button');var t=[];$(".vote-button").click((function(){console.log("clicked - "+$(this).closest(".slide").attr("id")),function(e){console.log(t.length);for(var r=0;r<t.length;r++)if(console.log("votes[i]="+t[r]),console.log("val="+e),t[r]===e)return t.splice(r,1),$("#"+e).closest(".slide").removeClass("slide-selected"),void console.log("unvoted for: "+e);t.length>=5?alert("You cannot vote for more than 5 entries!"):(t.push(e),$("#"+e).closest(".slide").addClass("slide-selected"),console.log("voted for: "+e),console.log(t))}($(this).closest(".slide").attr("id"))})),$("#submitvotes-button").click((function(e){e.preventDefault();var r=JSON.stringify(t);console.log(r),window.location.href="http://siliconbleach.pythonanywhere.com/?votes="+r}))})),function(t){var e="/jam"===t.location.pathname,r="true"===u.get("jamDev"),n=new URLSearchParams(t.location.search);if(e&&r){var a="",c={user:{votes:[]}},s=null,f=null,h={el:s,message:f,init:function(){$("body").append('\n\t\t<div class="toast" id="kokoToast">\n\t\t\t<section class="toast-content">\n\t\t\t\t<span id="toastMessage">{{message}}</span>\n\t\t\t</section>\n\t\t</div>\n\t'),s=$("#kokoToast"),f=$("#toastMessage"),this.el=s,this.message=f},hide:function(){this.el.removeClass("js-toast-show"),this.message.text("")},show:function(){this.el.addClass("js-toast-show")},success:function(t){var e=this;this.message.text(t),this.show(),setTimeout((function(){return e.hide()}),1750)}},p=function(){var t,e=(t=i().mark((function t(e){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Fetching votes"),t.next=3,fetch("".concat("https://artofkoko.com","/api/user/").concat(e,"/votes"),{method:"GET"});case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function c(t){o(a,n,i,c,s,"next",t)}function s(t){o(a,n,i,c,s,"throw",t)}c(void 0)}))});return function(t){return e.apply(this,arguments)}}();$(document).on("click",".artjam-vote-button",(function(t){var e=$(this).parent(),r=e.attr("id").split("_").pop();toggleVote(r)})),$(document).on("mouseenter",".image-slide-anchor",(function(t){$(t.currentTarget).css({"z-index":10})})).on("mouseleave",".image-slide-anchor",(function(t){return $(t.currentTarget).css({"z-index":"inherit"})})),$(document).on("ready",(function(){h.init(),$("body").append('<div id="jam-app"></div>');var e=new l({target:document.getElementById("jam-app"),props:{user:c.user}}),r=Array.from(document.querySelectorAll(".slide"));if(a=(a=r[0].id.split("_")).slice(1,a.length-1).join("_")+"_",$(".image-slide-anchor").append('<button class="artjam-vote-button" type="button">Vote</button>'),n.has("success")&&n.has("twitch_id")&&(console.log("saving cookie because of success & twitch_id params"),n.get("twitch_id"),c.user.twitchId=n.get("twitch_id"),u.set("userTwitchId",c.user.twitchId,{expires:14,secure:"none"})),"string"==typeof t.localStorage.getItem("artJamInfo")){var o=JSON.parse(retrieveVotesFromStorage);return c=Object.assign(c,o)}var i=u.get("userTwitchId");"string"==typeof i&&p(i).then((function(t){return t.json()})).then((function(t){var r,n=t.user;n&&(n.votes,n.twitch_id,n.id,n.name,c.user=n,c.votes=c.user.votes.map((function(t){return t.piece_id})),null===(r=c)||void 0===r||r.votes.forEach((function(t){$("#".concat("yui_").concat(a).concat(t)).find(".artjam-vote-button").toggleClass("is-selected")})),e.$set({user:c.user}))}))}))}}(window)}(esmEnv,$$1);
//# sourceMappingURL=artjam.js.map
